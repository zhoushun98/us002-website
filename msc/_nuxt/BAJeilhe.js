var U=1e9,se={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},j,N=!0,L="[DecimalError] ",S=L+"Invalid argument: ",Y=L+"Exponent out of range: ",$=Math.floor,R=Math.pow,fe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,v,C=1e7,m=7,ee=9007199254740991,Z=$(ee/m),h={};h.absoluteValue=h.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};h.comparedTo=h.cmp=function(e){var r,o,n,i,t=this;if(e=new t.constructor(e),t.s!==e.s)return t.s||-e.s;if(t.e!==e.e)return t.e>e.e^t.s<0?1:-1;for(n=t.d.length,i=e.d.length,r=0,o=n<i?n:i;r<o;++r)if(t.d[r]!==e.d[r])return t.d[r]>e.d[r]^t.s<0?1:-1;return n===i?0:n>i^t.s<0?1:-1};h.decimalPlaces=h.dp=function(){var e=this,r=e.d.length-1,o=(r-e.e)*m;if(r=e.d[r],r)for(;r%10==0;r/=10)o--;return o<0?0:o};h.dividedBy=h.div=function(e){return x(this,new this.constructor(e))};h.dividedToIntegerBy=h.idiv=function(e){var r=this,o=r.constructor;return w(x(r,new o(e),0,1),o.precision)};h.equals=h.eq=function(e){return!this.cmp(e)};h.exponent=function(){return D(this)};h.greaterThan=h.gt=function(e){return this.cmp(e)>0};h.greaterThanOrEqualTo=h.gte=function(e){return this.cmp(e)>=0};h.isInteger=h.isint=function(){return this.e>this.d.length-2};h.isNegative=h.isneg=function(){return this.s<0};h.isPositive=h.ispos=function(){return this.s>0};h.isZero=function(){return this.s===0};h.lessThan=h.lt=function(e){return this.cmp(e)<0};h.lessThanOrEqualTo=h.lte=function(e){return this.cmp(e)<1};h.logarithm=h.log=function(e){var r,o=this,n=o.constructor,i=n.precision,t=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(v))throw Error(L+"NaN");if(o.s<1)throw Error(L+(o.s?"NaN":"-Infinity"));return o.eq(v)?new n(0):(N=!1,r=x(b(o,t),b(e,t),t),N=!0,w(r,i))};h.minus=h.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?te(r,e):re(r,(e.s=-e.s,e))};h.modulo=h.mod=function(e){var r,o=this,n=o.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(L+"NaN");return o.s?(N=!1,r=x(o,e,0,1).times(e),N=!0,o.minus(r)):w(new n(o),i)};h.naturalExponential=h.exp=function(){return ne(this)};h.naturalLogarithm=h.ln=function(){return b(this)};h.negated=h.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};h.plus=h.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?re(r,e):te(r,(e.s=-e.s,e))};h.precision=h.sd=function(e){var r,o,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(S+e);if(r=D(i)+1,n=i.d.length-1,o=n*m+1,n=i.d[n],n){for(;n%10==0;n/=10)o--;for(n=i.d[0];n>=10;n/=10)o++}return e&&r>o?r:o};h.squareRoot=h.sqrt=function(){var e,r,o,n,i,t,s,f=this,u=f.constructor;if(f.s<1){if(!f.s)return new u(0);throw Error(L+"NaN")}for(e=D(f),N=!1,i=Math.sqrt(+f),i==0||i==1/0?(r=_(f.d),(r.length+e)%2==0&&(r+="0"),i=Math.sqrt(r),e=$((e+1)/2)-(e<0||e%2),i==1/0?r="5e"+e:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new u(r)):n=new u(i.toString()),o=u.precision,i=s=o+3;;)if(t=n,n=t.plus(x(f,t,s+2)).times(.5),_(t.d).slice(0,s)===(r=_(n.d)).slice(0,s)){if(r=r.slice(s-3,s+1),i==s&&r=="4999"){if(w(t,o+1,0),t.times(t).eq(f)){n=t;break}}else if(r!="9999")break;s+=4}return N=!0,w(n,o)};h.times=h.mul=function(e){var r,o,n,i,t,s,f,u,l,c=this,d=c.constructor,p=c.d,a=(e=new d(e)).d;if(!c.s||!e.s)return new d(0);for(e.s*=c.s,o=c.e+e.e,u=p.length,l=a.length,u<l&&(t=p,p=a,a=t,s=u,u=l,l=s),t=[],s=u+l,n=s;n--;)t.push(0);for(n=l;--n>=0;){for(r=0,i=u+n;i>n;)f=t[i]+a[n]*p[i-n-1]+r,t[i--]=f%C|0,r=f/C|0;t[i]=(t[i]+r)%C|0}for(;!t[--s];)t.pop();return r?++o:t.shift(),e.d=t,e.e=o,N?w(e,d.precision):e};h.toDecimalPlaces=h.todp=function(e,r){var o=this,n=o.constructor;return o=new n(o),e===void 0?o:(q(e,0,U),r===void 0?r=n.rounding:q(r,0,8),w(o,e+D(o)+1,r))};h.toExponential=function(e,r){var o,n=this,i=n.constructor;return e===void 0?o=T(n,!0):(q(e,0,U),r===void 0?r=i.rounding:q(r,0,8),n=w(new i(n),e+1,r),o=T(n,!0,e+1)),o};h.toFixed=function(e,r){var o,n,i=this,t=i.constructor;return e===void 0?T(i):(q(e,0,U),r===void 0?r=t.rounding:q(r,0,8),n=w(new t(i),e+D(i)+1,r),o=T(n.abs(),!1,e+D(n)+1),i.isneg()&&!i.isZero()?"-"+o:o)};h.toInteger=h.toint=function(){var e=this,r=e.constructor;return w(new r(e),D(e)+1,r.rounding)};h.toNumber=function(){return+this};h.toPower=h.pow=function(e){var r,o,n,i,t,s,f=this,u=f.constructor,l=12,c=+(e=new u(e));if(!e.s)return new u(v);if(f=new u(f),!f.s){if(e.s<1)throw Error(L+"Infinity");return f}if(f.eq(v))return f;if(n=u.precision,e.eq(v))return w(f,n);if(r=e.e,o=e.d.length-1,s=r>=o,t=f.s,s){if((o=c<0?-c:c)<=ee){for(i=new u(v),r=Math.ceil(n/m+4),N=!1;o%2&&(i=i.times(f),y(i.d,r)),o=$(o/2),o!==0;)f=f.times(f),y(f.d,r);return N=!0,e.s<0?new u(v).div(i):w(i,n)}}else if(t<0)throw Error(L+"NaN");return t=t<0&&e.d[Math.max(r,o)]&1?-1:1,f.s=1,N=!1,i=e.times(b(f,n+l)),N=!0,i=ne(i),i.s=t,i};h.toPrecision=function(e,r){var o,n,i=this,t=i.constructor;return e===void 0?(o=D(i),n=T(i,o<=t.toExpNeg||o>=t.toExpPos)):(q(e,1,U),r===void 0?r=t.rounding:q(r,0,8),i=w(new t(i),e,r),o=D(i),n=T(i,e<=o||o<=t.toExpNeg,e)),n};h.toSignificantDigits=h.tosd=function(e,r){var o=this,n=o.constructor;return e===void 0?(e=n.precision,r=n.rounding):(q(e,1,U),r===void 0?r=n.rounding:q(r,0,8)),w(new n(o),e,r)};h.toString=h.valueOf=h.val=h.toJSON=h[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=D(e),o=e.constructor;return T(e,r<=o.toExpNeg||r>=o.toExpPos)};function re(e,r){var o,n,i,t,s,f,u,l,c=e.constructor,d=c.precision;if(!e.s||!r.s)return r.s||(r=new c(e)),N?w(r,d):r;if(u=e.d,l=r.d,s=e.e,i=r.e,u=u.slice(),t=s-i,t){for(t<0?(n=u,t=-t,f=l.length):(n=l,i=s,f=u.length),s=Math.ceil(d/m),f=s>f?s+1:f+1,t>f&&(t=f,n.length=1),n.reverse();t--;)n.push(0);n.reverse()}for(f=u.length,t=l.length,f-t<0&&(t=f,n=l,l=u,u=n),o=0;t;)o=(u[--t]=u[t]+l[t]+o)/C|0,u[t]%=C;for(o&&(u.unshift(o),++i),f=u.length;u[--f]==0;)u.pop();return r.d=u,r.e=i,N?w(r,d):r}function q(e,r,o){if(e!==~~e||e<r||e>o)throw Error(S+e)}function _(e){var r,o,n,i=e.length-1,t="",s=e[0];if(i>0){for(t+=s,r=1;r<i;r++)n=e[r]+"",o=m-n.length,o&&(t+=M(o)),t+=n;s=e[r],n=s+"",o=m-n.length,o&&(t+=M(o))}else if(s===0)return"0";for(;s%10===0;)s/=10;return t+s}var x=function(){function e(n,i){var t,s=0,f=n.length;for(n=n.slice();f--;)t=n[f]*i+s,n[f]=t%C|0,s=t/C|0;return s&&n.unshift(s),n}function r(n,i,t,s){var f,u;if(t!=s)u=t>s?1:-1;else for(f=u=0;f<t;f++)if(n[f]!=i[f]){u=n[f]>i[f]?1:-1;break}return u}function o(n,i,t){for(var s=0;t--;)n[t]-=s,s=n[t]<i[t]?1:0,n[t]=s*C+n[t]-i[t];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,t,s){var f,u,l,c,d,p,a,I,g,E,H,k,J,W,G,K,P,V,X=n.constructor,oe=n.s==i.s?1:-1,A=n.d,O=i.d;if(!n.s)return new X(n);if(!i.s)throw Error(L+"Division by zero");for(u=n.e-i.e,P=O.length,G=A.length,a=new X(oe),I=a.d=[],l=0;O[l]==(A[l]||0);)++l;if(O[l]>(A[l]||0)&&--u,t==null?k=t=X.precision:s?k=t+(D(n)-D(i))+1:k=t,k<0)return new X(0);if(k=k/m+2|0,l=0,P==1)for(c=0,O=O[0],k++;(l<G||c)&&k--;l++)J=c*C+(A[l]||0),I[l]=J/O|0,c=J%O|0;else{for(c=C/(O[0]+1)|0,c>1&&(O=e(O,c),A=e(A,c),P=O.length,G=A.length),W=P,g=A.slice(0,P),E=g.length;E<P;)g[E++]=0;V=O.slice(),V.unshift(0),K=O[0],O[1]>=C/2&&++K;do c=0,f=r(O,g,P,E),f<0?(H=g[0],P!=E&&(H=H*C+(g[1]||0)),c=H/K|0,c>1?(c>=C&&(c=C-1),d=e(O,c),p=d.length,E=g.length,f=r(d,g,p,E),f==1&&(c--,o(d,P<p?V:O,p))):(c==0&&(f=c=1),d=O.slice()),p=d.length,p<E&&d.unshift(0),o(g,d,E),f==-1&&(E=g.length,f=r(O,g,P,E),f<1&&(c++,o(g,P<E?V:O,E))),E=g.length):f===0&&(c++,g=[0]),I[l++]=c,f&&g[0]?g[E++]=A[W]||0:(g=[A[W]],E=1);while((W++<G||g[0]!==void 0)&&k--)}return I[0]||I.shift(),a.e=u,w(a,s?t+D(a)+1:t)}}();function ne(e,r){var o,n,i,t,s,f,u=0,l=0,c=e.constructor,d=c.precision;if(D(e)>16)throw Error(Y+D(e));if(!e.s)return new c(v);for(r==null?(N=!1,f=d):f=r,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(n=Math.log(R(2,l))/Math.LN10*2+5|0,f+=n,o=i=t=new c(v),c.precision=f;;){if(i=w(i.times(e),f),o=o.times(++u),s=t.plus(x(i,o,f)),_(s.d).slice(0,f)===_(t.d).slice(0,f)){for(;l--;)t=w(t.times(t),f);return c.precision=d,r==null?(N=!0,w(t,d)):t}t=s}}function D(e){for(var r=e.e*m,o=e.d[0];o>=10;o/=10)r++;return r}function Q(e,r,o){if(r>e.LN10.sd())throw N=!0,o&&(e.precision=o),Error(L+"LN10 precision limit exceeded");return w(new e(e.LN10),r)}function M(e){for(var r="";e--;)r+="0";return r}function b(e,r){var o,n,i,t,s,f,u,l,c,d=1,p=10,a=e,I=a.d,g=a.constructor,E=g.precision;if(a.s<1)throw Error(L+(a.s?"NaN":"-Infinity"));if(a.eq(v))return new g(0);if(r==null?(N=!1,l=E):l=r,a.eq(10))return r==null&&(N=!0),Q(g,l);if(l+=p,g.precision=l,o=_(I),n=o.charAt(0),t=D(a),Math.abs(t)<15e14){for(;n<7&&n!=1||n==1&&o.charAt(1)>3;)a=a.times(e),o=_(a.d),n=o.charAt(0),d++;t=D(a),n>1?(a=new g("0."+o),t++):a=new g(n+"."+o.slice(1))}else return u=Q(g,l+2,E).times(t+""),a=b(new g(n+"."+o.slice(1)),l-p).plus(u),g.precision=E,r==null?(N=!0,w(a,E)):a;for(f=s=a=x(a.minus(v),a.plus(v),l),c=w(a.times(a),l),i=3;;){if(s=w(s.times(c),l),u=f.plus(x(s,new g(i),l)),_(u.d).slice(0,l)===_(f.d).slice(0,l))return f=f.times(2),t!==0&&(f=f.plus(Q(g,l+2,E).times(t+""))),f=x(f,new g(d),l),g.precision=E,r==null?(N=!0,w(f,E)):f;f=u,i+=2}}function z(e,r){var o,n,i;for((o=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(o<0&&(o=n),o+=+r.slice(n+1),r=r.substring(0,n)):o<0&&(o=r.length),n=0;r.charCodeAt(n)===48;)++n;for(i=r.length;r.charCodeAt(i-1)===48;)--i;if(r=r.slice(n,i),r){if(i-=n,o=o-n-1,e.e=$(o/m),e.d=[],n=(o+1)%m,o<0&&(n+=m),n<i){for(n&&e.d.push(+r.slice(0,n)),i-=m;n<i;)e.d.push(+r.slice(n,n+=m));r=r.slice(n),n=m-r.length}else n-=i;for(;n--;)r+="0";if(e.d.push(+r),N&&(e.e>Z||e.e<-Z))throw Error(Y+o)}else e.s=0,e.e=0,e.d=[0];return e}function w(e,r,o){var n,i,t,s,f,u,l,c,d=e.d;for(s=1,t=d[0];t>=10;t/=10)s++;if(n=r-s,n<0)n+=m,i=r,l=d[c=0];else{if(c=Math.ceil((n+1)/m),t=d.length,c>=t)return e;for(l=t=d[c],s=1;t>=10;t/=10)s++;n%=m,i=n-m+s}if(o!==void 0&&(t=R(10,s-i-1),f=l/t%10|0,u=r<0||d[c+1]!==void 0||l%t,u=o<4?(f||u)&&(o==0||o==(e.s<0?3:2)):f>5||f==5&&(o==4||u||o==6&&(n>0?i>0?l/R(10,s-i):0:d[c-1])%10&1||o==(e.s<0?8:7))),r<1||!d[0])return u?(t=D(e),d.length=1,r=r-t-1,d[0]=R(10,(m-r%m)%m),e.e=$(-r/m)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=c,t=1,c--):(d.length=c+1,t=R(10,m-n),d[c]=i>0?(l/R(10,s-i)%R(10,i)|0)*t:0),u)for(;;)if(c==0){(d[0]+=t)==C&&(d[0]=1,++e.e);break}else{if(d[c]+=t,d[c]!=C)break;d[c--]=0,t=1}for(n=d.length;d[--n]===0;)d.pop();if(N&&(e.e>Z||e.e<-Z))throw Error(Y+D(e));return e}function te(e,r){var o,n,i,t,s,f,u,l,c,d,p=e.constructor,a=p.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new p(e),N?w(r,a):r;if(u=e.d,d=r.d,n=r.e,l=e.e,u=u.slice(),s=l-n,s){for(c=s<0,c?(o=u,s=-s,f=d.length):(o=d,n=l,f=u.length),i=Math.max(Math.ceil(a/m),f)+2,s>i&&(s=i,o.length=1),o.reverse(),i=s;i--;)o.push(0);o.reverse()}else{for(i=u.length,f=d.length,c=i<f,c&&(f=i),i=0;i<f;i++)if(u[i]!=d[i]){c=u[i]<d[i];break}s=0}for(c&&(o=u,u=d,d=o,r.s=-r.s),f=u.length,i=d.length-f;i>0;--i)u[f++]=0;for(i=d.length;i>s;){if(u[--i]<d[i]){for(t=i;t&&u[--t]===0;)u[t]=C-1;--u[t],u[i]+=C}u[i]-=d[i]}for(;u[--f]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(r.d=u,r.e=n,N?w(r,a):r):new p(0)}function T(e,r,o){var n,i=D(e),t=_(e.d),s=t.length;return r?(o&&(n=o-s)>0?t=t.charAt(0)+"."+t.slice(1)+M(n):s>1&&(t=t.charAt(0)+"."+t.slice(1)),t=t+(i<0?"e":"e+")+i):i<0?(t="0."+M(-i-1)+t,o&&(n=o-s)>0&&(t+=M(n))):i>=s?(t+=M(i+1-s),o&&(n=o-i-1)>0&&(t=t+"."+M(n))):((n=i+1)<s&&(t=t.slice(0,n)+"."+t.slice(n)),o&&(n=o-s)>0&&(i+1===s&&(t+="."),t+=M(n))),e.s<0?"-"+t:t}function y(e,r){if(e.length>r)return e.length=r,!0}function ie(e){var r,o,n;function i(t){var s=this;if(!(s instanceof i))return new i(t);if(s.constructor=i,t instanceof i){s.s=t.s,s.e=t.e,s.d=(t=t.d)?t.slice():t;return}if(typeof t=="number"){if(t*0!==0)throw Error(S+t);if(t>0)s.s=1;else if(t<0)t=-t,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(t===~~t&&t<1e7){s.e=0,s.d=[t];return}return z(s,t.toString())}else if(typeof t!="string")throw Error(S+t);if(t.charCodeAt(0)===45?(t=t.slice(1),s.s=-1):s.s=1,fe.test(t))z(s,t);else throw Error(S+t)}if(i.prototype=h,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ie,i.config=i.set=ue,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<n.length;)e.hasOwnProperty(o=n[r++])||(e[o]=this[o]);return i.config(e),i}function ue(e){if(!e||typeof e!="object")throw Error(L+"Object expected");var r,o,n,i=["precision",1,U,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<i.length;r+=3)if((n=e[o=i[r]])!==void 0)if($(n)===n&&n>=i[r+1]&&n<=i[r+2])this[o]=n;else throw Error(S+o+": "+n);if((n=e[o="LN10"])!==void 0)if(n==Math.LN10)this[o]=new this(n);else throw Error(S+o+": "+n);return this}var j=ie(se);v=new j(1);const B=j;function ce({value:e,decimals:r=2,rounding:o=B.ROUND_HALF_UP,skipRounding:n=!1,smartStripTrailingZeros:i=!1}){(typeof e=="string"||typeof e=="number")&&(e=new B(e));const t=e.isNegative(),s=e.abs(),f=n?s.toFixed():s.toFixed(r,o);let[u,l=""]=f.split("."),c="";const d=u.length;for(let p=d-1;p>=0;p--){const a=p!==d-1&&(d-1-p)%3===0;c=`${u[p]}${a?",":""}${c}`}if(i&&l.length>0){let p=l.replace(/0*$/,"");p.length===0&&d>3&&(p="0"),l=p}return`${t?"-":""}${c}${r>0&&l.length>0?`.${l}`:""}`}function le(e,r=!1,o=!1){(typeof e=="string"||typeof e=="number")&&(e=new B(e));const n=ce({value:e,decimals:2});return(o?e.isPositive():e.greaterThanOrEqualTo(0))?`${r?"":"+"}${n}%`:`${n}%`}function he({oldPrice:e,newPrice:r}){const o=F(F(e).toString()),n=F(F(r).toString());return o.lessThanOrEqualTo(0)?F(0):n.minus(o).mul(100).dividedBy(o)}const F=(e,r=new B(0))=>{if(e)try{return new B(e)}catch{return r}return r};export{B as D,j as a,ce as f,he as g,le as p,F as t};
