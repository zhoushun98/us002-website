import{_ as l,g as _,X as d}from"./orVGlpMf.js";import{q as f,r as m,Z as r,_ as u,U as p,a3 as y,b as h,a6 as k,Y as w,u as b,x as g,d as C}from"./Ca8kBgT7.js";import{u as x}from"./BGjiCQZh.js";const D={key:0,class:"copy-data-button__indicator"},I=f({__name:"CopyDataIconButton",props:{copyData:{default:""},timeoutDuration:{default:1500}},setup(e){const n=e,a=m(!1);async function t(){await navigator.clipboard.writeText(n.copyData),a.value=!0,setTimeout(()=>{a.value=!1},n.timeoutDuration)}return(i,o)=>{const s=l;return r(),u("button",{class:"copy-data-button",onClick:t},[p(w,{name:"fade"},{default:y(()=>[h(a)?(r(),u("span",D,"Copied")):k("",!0)]),_:1}),p(s,{name:"copy"})])}}}),T=Object.assign(_(I,[["__scopeId","data-v-1620b391"]]),{__name:"CopyDataIconButton"});async function L({refreshOnMounted:e=!0}){const n=x(),a=b(),{data:t,refresh:i}=await d("useLightningNetworkApi",()=>$fetch(a.$buildApiUrl("lightningNetwork")),{dedupe:"defer"}),o=g(()=>v(t.value));return C(n,(s,c)=>{!s&&c&&e&&i()}),{data:o,refresh:i}}function v(e){const n={node:{alias:null,pubkey:null,isOnline:!1,activeChannels:0,peers:0,capacity:0,uri:null,ipPort:""},network:{capacity:0,channels:0,nodes:0},isInitialized:!1};if(!e)return n;const{data:a}=e;if(a.length===0)return n;const t=a[0].node_info,i=a[0].node_info_capacity,o=a[0].network_info,s={alias:t.alias,pubkey:t.identity_pubkey,isOnline:t.is_online,activeChannels:t.num_active_channels,peers:t.num_peers,capacity:parseFloat(i.total_capacity),uri:t.uris[0],ipPort:t.uris[0].split("@")[1]},c={channels:o.num_channels,nodes:o.num_nodes,capacity:parseFloat(o.total_network_capacity)};return{node:s,network:c,isInitialized:!0}}export{T as _,L as u};
