import{_ as E}from"./B5j5rdTi.js";import{_ as x,a as F}from"./DRnxXVdD.js";import{_ as P}from"./DzAToFje.js";import{q as y,Z as c,_ as g,U as r,S as v,ao as f,d as A,w as O,b as a,a3 as d,a6 as l,a2 as T,a5 as U}from"./Ca8kBgT7.js";import{u as R,a as $,c as b,b as D,d as Y,e as m,r as i,f as p}from"./orVGlpMf.js";const G=y({__name:"BtsPage",props:{page:{}},setup(h){return(t,o)=>{const s=x,n=P;return c(),g(v,null,[r(s,{seo:t.page.seo,locale:t.page.locale},null,8,["seo","locale"]),r(n,{sections:t.page.components},null,8,["sections"])],64)}}}),q=Object.assign(G,{__name:"BtsPage"}),K={key:0},M={key:0},V=!1,Q=y({__name:"BtsPage",async setup(h){let t,o;const s=R(),n=String(s.name),_=String(s.meta.locale),{setLocale:L}=$();[t,o]=f(()=>L(_)),await t,o();const{data:e,status:k,error:B}=([t,o]=f(()=>Y("/api/page",{query:{slug:n,locale:_},key:`api/page-${n}-${_}`,retry:3,retryDelay:500},"$fGDYSg6FLC")),t=await t,o(),t);if(B.value)throw b({statusCode:500,statusMessage:"Page Not Found"});A(k,u=>{if((u==="error"||u==="success")&&!e.value)throw b({statusCode:500,statusMessage:"Page Not Found"})});const C=D();return O(()=>{if(e.value&&C.isContentBlocked(e.value.geofencings))switch(e.value.layout){case m.LAYOUTS.LEARN_CENTER:i(p("/learn/"));break;case m.LAYOUTS.BLOG:i(p("/blog/"));break;default:i(p("/"))}}),(u,j)=>{const N=E,w=q,S=F;return a(e)?(c(),g("div",K,[r(S,{name:a(e).layout,geofencings:a(e).geofencings??{}},{breadcrumbs:d(()=>[a(e).layout===a(m).LAYOUTS.LEARN_CENTER?(c(),T(N,{key:0,breadcrumbs:a(e).breadcrumbs},null,8,["breadcrumbs"])):l("",!0)]),default:d(()=>[r(w,{page:a(e)},null,8,["page"]),V?(c(),g("pre",M,"        "+U(JSON.stringify(a(e),null,2))+`
      `,1)):l("",!0)]),_:1},8,["name","geofencings"])])):l("",!0)}}});export{Q as default};
