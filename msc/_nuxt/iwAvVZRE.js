import{_ as N}from"./CvRMYBuQ.js";import{u as S,d as $,b,l as U,g as V}from"./orVGlpMf.js";import{_ as D}from"./dsn67dQB.js";import{u as j}from"./DRnxXVdD.js";import{q,ao as A,x as v,r as _,b as d,Z as c,a2 as C,a3 as h,$ as l,_ as x,S as K,an as M,U as z,ad as E,a6 as P,ae as G,af as H}from"./Ca8kBgT7.js";import"./p3ymIEW1.js";import"./jBO-B7bt.js";const O={class:"posts"},Q={class:"post-grid"},R={key:0,class:"posts__load-more"},T=q({__name:"LearnCenterCategoryPosts",props:{component:{},props:{},categorySlug:{},geofencings:{}},async setup(k){let n,p;const u=k,L=S(),f=String(L.meta.locale),{data:o}=([n,p]=A(()=>$(`/api/learn-center-posts/${u.categorySlug}`,{query:{locale:f},key:`api/learn-center-posts/${u.categorySlug}-${f}`,retry:3,retryDelay:500},"$t0vHFNrQNo")),n=await n,p(),n),B=v(()=>o.value.paginationItems.length>0&&g.value!==o.value.paginationItems.length),s=_(!1),i=_([]),g=_(0),y=b(),w=v(()=>{var t;return[...((t=o.value)==null?void 0:t.posts)??[],...i.value??[]].filter(e=>{var r;return!y.isContentBlocked(e==null?void 0:e.geofencings)&&!y.isContentBlocked((r=e==null?void 0:e.category)==null?void 0:r.geofencings)})});function F(){s.value||(s.value=!0,fetch(j(o.value.paginationItems[g.value],{cdn:!0})).then(m=>{m.json().then(t=>{s.value=!1,g.value+=1,i.value=i.value.concat(t.map(e=>({...e,useDefaultImage:!0})))})}).catch(()=>{s.value=!1}))}return(m,t)=>{const e=N,r=U,I=D;return d(o)?(c(),C(I,G(H({key:0},u.props)),{default:h(()=>[l("div",null,[l("div",O,[t[0]||(t[0]=l("h2",null,"Posts",-1)),l("div",Q,[(c(!0),x(K,null,M(d(w),a=>(c(),C(e,{key:a.url,title:a.title,excerpt:a.excerpt,"post-url":a.url,"category-url":a.category.url,"category-name":a.category.name,"use-default-image":!!a.useDefaultImage,"show-category":!1,image:a.image.url},null,8,["title","excerpt","post-url","category-url","category-name","use-default-image","image"]))),128))])]),d(B)?(c(),x("div",R,[z(r,{"as-link":!1,onClick:F},{default:h(()=>t[1]||(t[1]=[E(" Load more ")])),_:1})])):P("",!0)])]),_:1},16)):P("",!0)}}}),ae=Object.assign(V(T,[["__scopeId","data-v-d95bd03e"]]),{__name:"LearnCenterCategoryPosts"});export{ae as default};
