import{f as D}from"./BAJeilhe.js";import{r as f,u as p,x as i,j as h}from"./Ca8kBgT7.js";import{u as C}from"./BGjiCQZh.js";import{I as v,d as A}from"./orVGlpMf.js";const g=(e,t)=>`${D({value:e,decimals:8,smartStripTrailingZeros:!0})} ${t}`;async function x(){const e=h(),t=C();if(!e.public.enableLearnAndEarn)return{campaigns:f([]),hasCampaigns:f(!1),refresh:()=>{}};const a=p(),{data:r,refresh:u}=await v(a.$buildApiUrl("learnAndEarnCampaignListResource"),{key:"learnAndEarnCampaignListResource",dedupe:"defer",credentials:"include",watch:!1,server:!1},"$24uaYGdRJw"),o=i(()=>{var s,d;return(s=r.value)!=null&&s.data&&!t.value?(d=r.value)==null?void 0:d.data.map(({startDateTimestamp:c,endDateTimestamp:l,rewardAmount:m,rewardCurrency:w,...R})=>({startDate:new Date(c*1e3),endDate:new Date(l*1e3),formattedReward:g(m,w),...R})):[]}),n=i(()=>{var s;return((s=o.value)==null?void 0:s.length)>0});return{campaigns:o,refresh:u,hasCampaigns:n}}async function L(e){if(!e)return;const t=p(),{data:a,error:r}=await A(t.$buildApiUrl("learnAndEarnCampaignDetailsResource",{campaign_id:e}),{key:"learnAndEarnCampaignDetailsResource",dedupe:"defer",credentials:"include"},"$ymD2lv7ri7"),u=i(()=>{var n;if((n=a.value)!=null&&n.data){const{startDateTimestamp:s,endDateTimestamp:d,rewardAmount:c,rewardCurrency:l,...m}=a.value.data;return{startDate:new Date(s*1e3),endDate:new Date(d*1e3),formattedReward:g(c,l),...m}}}),o=i(()=>{var n;return((n=r.value)==null?void 0:n.statusCode)===401});return{campaign:u,unauthorized:o,error:r}}async function z(e){if(!e)return;const t=p(),{error:a}=await A(t.$buildApiUrl("learnAndEarnCampaignRewardActionResource",{campaign_id:e}),{method:"POST",key:"learnAndEarnCampaignRewardActionResource",dedupe:"defer",credentials:"include"},"$oNch3MfoRv"),r=i(()=>{var u;return((u=a.value)==null?void 0:u.statusCode)===401});return{error:a,unauthorized:r}}export{L as g,x as l,z as s};
